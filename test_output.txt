
> servio-ai-frontend@0.0.0 test
> vitest run --coverage


[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90mC:/Users/JE/servio.ai[39m
      [2mCoverage enabled with [22m[33mv8[39m

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m01 creates admin, client, provider users
[22m[39m
[TEST 1] Setup admin authentication...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m01 creates admin, client, provider users
[22m[39mÃ”Â£Ã´ Admin created: admin-test-1764340281411@servio.test

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m01 creates admin, client, provider users
[22m[39mÃ”Â£Ã´ Client created: client-analytics-1764340281824@servio.test

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m01 creates admin, client, provider users
[22m[39mÃ”Â£Ã´ Provider created: provider-analytics-1764340282196@servio.test

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m02 lists users including test subset
[22m[39m
[TEST 2] Fetch all users for analytics...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m02 lists users including test subset
[22m[39mÃ”Â£Ã´ Fetched 1349 users (test subset: 1337) successfully

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m03 creates and completes job with earnings
[22m[39m
[TEST 3] Create job for analytics data...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m03 creates and completes job with earnings
[22m[39mÃ”Â£Ã´ Job created: CCfHRbMn6Oie9Iix0gnb

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m03 creates and completes job with earnings
[22m[39mÃ”Â£Ã´ Job completed with earnings

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m04 aggregates revenue metrics
[22m[39m
[TEST 4] Verify analytics includes revenue data...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m04 aggregates revenue metrics
[22m[39mÃ”Â£Ã´ Total revenue: R$ 66300.00
Ã”Â£Ã´ Platform revenue: R$ 13237.50

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39m
[TEST 5] Create dispute for resolution testing...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39mÃ”Â£Ã´ Dispute created: 4yJ3MebedCGlzx058mN1

[TEST 6] Fetch disputes for analytics...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39mÃ”Â£Ã´ Total disputes: 420
Ã”Â£Ã´ Open disputes: 420
Ã”Â£Ã´ Resolved disputes: 0

[TEST 6b] Seed escrow for job (optional)...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39mÃ”Ã¥Ã€ Skipped: test-utils escrow seeding not available

[TEST 7] Resolve dispute as admin...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39mÃ”Ã¥Ã€ Resolution skipped: 404 - {"error":"Escrow record not found for this job."}
  (Endpoint requer escrow configurado - teste manual necessâ”œÃ­rio)

[TEST 8] Verify dispute resolution in analytics...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39mÃ”Ã¥Ã€ Skipped: dispute resolution was not completed (requires escrow setup)

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m09 creates sentiment alert
[22m[39m
[TEST 9] Create fraud alert for analytics...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m09 creates sentiment alert
[22m[39mÃ”Â£Ã´ Fraud alert created with risk score: 8

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m10 lists sentiment alerts
[22m[39m
[TEST 10] Fetch fraud alerts for analytics...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m10 lists sentiment alerts
[22m[39mÃ”Â£Ã´ Total fraud alerts: 436
Ã”Â£Ã´ New alerts: 436
Ã”Â£Ã´ High risk alerts: 436

 [32mÃ”Â£Ã´[39m tests/e2e_admin_dashboard.test.mjs [2m([22m[2m7 tests[22m[2m)[22m[33m 6359[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m01 creates admin, client, provider users [33m1040[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m02 lists users including test subset [33m1001[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m03 creates and completes job with earnings [33m657[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m04 aggregates revenue metrics [33m834[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m05-08 dispute flow (skipped if endpoint missing) [33m1918[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m10 lists sentiment alerts [33m652[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m7 passed[39m[22m[90m (7)[39m
[2m   Start at [22m 11:31:17
[2m   Duration [22m 10.53s[2m (transform 109ms, setup 662ms, collect 18ms, tests 6.36s, environment 1.48s, prepare 141ms)[22m

[34m % [39m[2mCoverage report from [22m[33mv8[39m
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |       0 |        0 |       0 |       0 |                   
 servio.ai         |       0 |        0 |       0 |       0 |                   
  App.tsx          |       0 |        0 |       0 |       0 | 1-566             
  ...baseConfig.ts |       0 |        0 |       0 |       0 | 1-56              
  types.ts         |       0 |        0 |       0 |       0 | 1                 
 ....ai/components |       0 |        0 |       0 |       0 |                   
  ...ernalChat.tsx |       0 |        0 |       0 |       0 | 1-266             
  ...estWizard.tsx |       0 |        0 |       0 |       0 | 1-354             
  ...Assistant.tsx |       0 |        0 |       0 |       0 | 1-50              
  AddItemModal.tsx |       0 |        0 |       0 |       0 | 1-190             
  ...Analytics.tsx |       0 |        0 |       0 |       0 | 1-46              
  ...Dashboard.tsx |       0 |        0 |       0 |       0 | 1-197             
  ...Dashboard.tsx |       0 |        0 |       0 |       0 | 1-146             
  ...puteModal.tsx |       0 |        0 |       0 |       0 | 1-118             
  ...inancials.tsx |       0 |        0 |       0 |       0 | 1-99              
  ...audAlerts.tsx |       0 |        0 |       0 |       0 | 1-103             
  ...anagement.tsx |       0 |        0 |       0 |       0 | 1-150             
  ...Marketing.tsx |       0 |        0 |       0 |       0 | 1-421             
  ...ospecting.tsx |       0 |        0 |       0 |       0 | 1-256             
  ...anagement.tsx |       0 |        0 |       0 |       0 | 1-417             
  ...anagement.tsx |       0 |        0 |       0 |       0 | 1-212             
  ...anagement.tsx |       0 |        0 |       0 |       0 | 1-437             
  ...ationCard.tsx |       0 |        0 |       0 |       0 | 1-57              
  ...RoomModal.tsx |       0 |        0 |       0 |       0 | 1-193             
  AuthModal.tsx    |       0 |        0 |       0 |       0 | 1-117             
  Avatar.tsx       |       0 |        0 |       0 |       0 | 1-69              
  Chart.tsx        |       0 |        0 |       0 |       0 | 1-34              
  ChatModal.tsx    |       0 |        0 |       0 |       0 | 1-299             
  ...Dashboard.tsx |       0 |        0 |       0 |       0 | 1-931             
  ...ntJobCard.tsx |       0 |        0 |       0 |       0 | 1-108             
  ...edJobCard.tsx |       0 |        0 |       0 |       0 | 1-64              
  ...irmDialog.tsx |       0 |        0 |       0 |       0 | 1-71              
  Dashboard.tsx    |       0 |        0 |       0 |       0 | 1-113             
  ...ailsModal.tsx |       0 |        0 |       0 |       0 | 1-113             
  DisputeModal.tsx |       0 |        0 |       0 |       0 | 1-84              
  EmptyState.tsx   |       0 |        0 |       0 |       0 | 1-44              
  ...rBoundary.tsx |       0 |        0 |       0 |       0 | 1-62              
  ...idersPage.tsx |       0 |        0 |       0 |       0 | 1-238             
  Header.tsx       |       0 |        0 |       0 |       0 | 1-87              
  HeroSection.tsx  |       0 |        0 |       0 |       0 | 1-84              
  ItemCard.tsx     |       0 |        0 |       0 |       0 | 1-35              
  ...tailModal.tsx |       0 |        0 |       0 |       0 | 1-69              
  JobCard.tsx      |       0 |        0 |       0 |       0 | 1-113             
  JobFAQModal.tsx  |       0 |        0 |       0 |       0 | 1-71              
  ...tionModal.tsx |       0 |        0 |       0 |       0 | 1-44              
  JobTimeline.tsx  |       0 |        0 |       0 |       0 | 1-73              
  ...ngSpinner.tsx |       0 |        0 |       0 |       0 | 1-40              
  LocationMap.tsx  |       0 |        0 |       0 |       0 | 1-64              
  ...ggestions.tsx |       0 |        0 |       0 |       0 | 1-80              
  ...ultsModal.tsx |       0 |        0 |       0 |       0 | 1-58              
  ...tionsBell.tsx |       0 |        0 |       0 |       0 | 1-66              
  ...nsPopover.tsx |       0 |        0 |       0 |       0 | 1-70              
  Pagination.tsx   |       0 |        0 |       0 |       0 | 1-106             
  PaymentModal.tsx |       0 |        0 |       0 |       0 | 1-102             
  ...SetupCard.tsx |       0 |        0 |       0 |       0 | 1-56              
  ...ccessPage.tsx |       0 |        0 |       0 |       0 | 1-47              
  ...ioGallery.tsx |       0 |        0 |       0 |       0 | 1-40              
  ProfileModal.tsx |       0 |        0 |       0 |       0 | 1-264             
  ProfilePage.tsx  |       0 |        0 |       0 |       0 | 1-264             
  ...eStrength.tsx |       0 |        0 |       0 |       0 | 1-85              
  ProfileTips.tsx  |       0 |        0 |       0 |       0 | 1-54              
  ProgressBar.tsx  |       0 |        0 |       0 |       0 | 1-69              
  ...etailCard.tsx |       0 |        0 |       0 |       0 | 1-73              
  ...ListModal.tsx |       0 |        0 |       0 |       0 | 1-63              
  ...osalModal.tsx |       0 |        0 |       0 |       0 | 1-136             
  ...tionModal.tsx |       0 |        0 |       0 |       0 | 1-48              
  ...Dashboard.tsx |       0 |        0 |       0 |       0 | 1-308             
  ProviderCard.tsx |       0 |        0 |       0 |       0 | 1-75              
  ...Dashboard.tsx |       0 |        0 |       0 |       0 | 1-493             
  ...ningsCard.tsx |       0 |        0 |       0 |       0 | 1-142             
  ...erJobCard.tsx |       0 |        0 |       0 |       0 | 1-56              
  ...ndingPage.tsx |       0 |        0 |       0 |       0 | 1-127             
  ...nboarding.tsx |       0 |        0 |       0 |       0 | 1-164             
  ...esultCard.tsx |       0 |        0 |       0 |       0 | 1-77              
  ...ontactCTA.tsx |       0 |        0 |       0 |       0 | 1-31              
  ...tionModal.tsx |       0 |        0 |       0 |       0 | 1-41              
  ...alProgram.tsx |       0 |        0 |       0 |       0 | 1-47              
  ReviewModal.tsx  |       0 |        0 |       0 |       0 | 1-108             
  ...ndingPage.tsx |       0 |        0 |       0 |       0 | 1-68              
  ...questForm.tsx |       0 |        0 |       0 |       0 | 1-100             
  ...Generator.tsx |       0 |        0 |       0 |       0 | 1-72              
  Spinner.tsx      |       0 |        0 |       0 |       0 | 1-44              
  ...tingInput.tsx |       0 |        0 |       0 |       0 | 1-50              
  StatCard.tsx     |       0 |        0 |       0 |       0 | 1-37              
  StatusBadge.tsx  |       0 |        0 |       0 |       0 | 1-40              
  ...edDataSEO.tsx |       0 |        0 |       0 |       0 | 1-25              
  ...iodFilter.tsx |       0 |        0 |       0 |       0 | 1-31              
  Toast.tsx        |       0 |        0 |       0 |       0 | 1-67              
  ...Container.tsx |       0 |        0 |       0 |       0 | 1-20              
  Tooltip.tsx      |       0 |        0 |       0 |       0 | 1-51              
  ...lyticsData.ts |       0 |        0 |       0 |       0 | 1-68              
  ...hboardData.ts |       0 |        0 |       0 |       0 | 1-65              
 ...mponents/admin |       0 |        0 |       0 |       0 |                   
  ...riesChart.tsx |       0 |        0 |       0 |       0 | 1-57              
 ...ents/skeletons |       0 |        0 |       0 |       0 |                   
  ...dSkeleton.tsx |       0 |        0 |       0 |       0 | 1-34              
  ...dSkeleton.tsx |       0 |        0 |       0 |       0 | 1-51              
  ...dSkeleton.tsx |       0 |        0 |       0 |       0 | 1-15              
  ...dSkeleton.tsx |       0 |        0 |       0 |       0 | 1-32              
  ...etonBlock.tsx |       0 |        0 |       0 |       0 | 1-5               
 ...mponents/utils |       0 |        0 |       0 |       0 |                   
  a11yHelpers.ts   |       0 |        0 |       0 |       0 | 1-67              
 ...io.ai/services |       0 |        0 |       0 |       0 |                   
  api.ts           |       0 |        0 |       0 |       0 | 1-1032            
  ...Translator.ts |       0 |        0 |       0 |       0 | 1-249             
  geminiService.ts |       0 |        0 |       0 |       0 | 1-296             
  ...ingService.ts |       0 |        0 |       0 |       0 | 1-57              
  ...ingService.ts |       0 |        0 |       0 |       0 | 1-353             
  ...appService.ts |       0 |        0 |       0 |       0 | 1-29              
 .../src/analytics |       0 |        0 |       0 |       0 |                   
  adminMetrics.ts  |       0 |        0 |       0 |       0 | 1-173             
 ...src/components |       0 |        0 |       0 |       0 |                   
  ...eSelector.tsx |       0 |        0 |       0 |       0 | 1-283             
  ...nSettings.tsx |       0 |        0 |       0 |       0 | 1-358             
  ...pectorCRM.tsx |       0 |        0 |       0 |       0 | 1-1231            
  ...Materials.tsx |       0 |        0 |       0 |       0 | 1-310             
  ...nboarding.tsx |       0 |        0 |       0 |       0 | 1-244             
  ...ckActions.tsx |       0 |        0 |       0 |       0 | 1-205             
  ...ingWizard.tsx |       0 |        0 |       0 |       0 | 1-1310            
  ...Generator.tsx |       0 |        0 |       0 |       0 | 1-279             
 ...nts/prospector |       0 |        0 |       0 |       0 |                   
  ...Generator.tsx |       0 |        0 |       0 |       0 | 1-312             
  ...rdingTour.tsx |       0 |        0 |       0 |       0 | 1-463             
  ...MEnhanced.tsx |       0 |        0 |       0 |       0 | 1-470             
  ...ctionsBar.tsx |       0 |        0 |       0 |       0 | 1-302             
  QuickPanel.tsx   |       0 |        0 |       0 |       0 | 1-342             
 ...io.ai/src/data |       0 |        0 |       0 |       0 |                   
  ...eTemplates.ts |       0 |        0 |       0 |       0 | 1-355             
 servio.ai/src/lib |       0 |        0 |       0 |       0 |                   
  firebaseLazy.ts  |       0 |        0 |       0 |       0 | 1-89              
 ...i/src/services |       0 |        0 |       0 |       0 |                   
  ...icsService.ts |       0 |        0 |       0 |       0 | 1-227             
  fcmService.ts    |       0 |        0 |       0 |       0 | 1-201             
  ...ionService.ts |       0 |        0 |       0 |       0 | 1-308             
  ...inkService.ts |       0 |        0 |       0 |       0 | 1-318             
  ...onsService.ts |       0 |        0 |       0 |       0 | 1-172             
 ...o.ai/src/utils |       0 |        0 |       0 |       0 |                   
  ...torHelpers.ts |       0 |        0 |       0 |       0 | 1-87              
-------------------|---------|----------|---------|---------|-------------------
ERROR: Coverage for lines (0%) does not meet global threshold (80%)
ERROR: Coverage for functions (0%) does not meet global threshold (80%)
ERROR: Coverage for statements (0%) does not meet global threshold (80%)
ERROR: Coverage for branches (0%) does not meet global threshold (75%)
