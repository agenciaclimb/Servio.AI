
> servio-ai-frontend@0.0.0 test
> vitest run --coverage


[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90mC:/Users/JE/servio.ai[39m
      [2mCoverage enabled with [22m[33mv8[39m

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m01 creates admin, client, provider users
[22m[39m
[TEST 1] Setup admin authentication...

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Error handling > deve lidar com erros de rede corretamente
Failed to fetch users from backend, using mock data

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Error handling > deve lidar com resposta 500 do servidor
Failed to fetch users from backend, using mock data

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Error handling > deve lidar com resposta 404 nâ”œÃºo encontrada
Failed to fetch users from backend, using mock data

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Error handling > deve lidar com JSON invâ”œÃ­lido na resposta
Failed to fetch users from backend, using mock data

stderr | tests/errorMessages.test.ts > errorMessages > createErrorHandler > cria handler que retorna mensagem e aâ”œÂºâ”œÃºo
[Error] {
  timestamp: '2025-11-15T15:44:24.731Z',
  context: 'payment',
  code: 'E_NETWORK',
  message: 'Network error',
  status: undefined,
  details: undefined,
  stack: undefined
}

stderr | tests/errorMessages.test.ts > errorMessages > createErrorHandler > chama callback de retry quando aâ”œÂºâ”œÃºo â”œÂ® executada
[Error] {
  timestamp: '2025-11-15T15:44:24.735Z',
  context: 'unknown',
  code: 'E_NETWORK',
  message: 'Network error',
  status: undefined,
  details: undefined,
  stack: undefined
}

stderr | tests/errorMessages.test.ts > errorMessages > createErrorHandler > chama callback de auth quando aâ”œÂºâ”œÃºo â”œÂ® login
[Error] {
  timestamp: '2025-11-15T15:44:24.736Z',
  context: 'unknown',
  code: 'E_AUTH',
  message: 'Unauthorized',
  status: undefined,
  details: undefined,
  stack: undefined
}

stderr | tests/api.errorHandling.test.ts > apiCall - Error Handling > E_TIMEOUT - AbortController > deve lanâ”œÂºar E_TIMEOUT quando AbortError ocorre
[api] Timeout on /api/stripe/create-connect-account Error: Tempo de resposta excedido. Tente novamente.
    at makeApiError (C:\Users\JE\servio.ai\services\api.ts:58:15)
    at apiCall (C:\Users\JE\servio.ai\services\api.ts:96:22)
    at processTicksAndRejections (node:internal/process/task_queues:105:5) {
  code: 'E_TIMEOUT'
}

 [32mÃ”Â£Ã´[39m tests/api.errorHandling.test.ts [2m([22m[2m14 tests[22m[2m)[22m[90m 63[2mms[22m[39m
stderr | tests/api.test.ts > API Service > fetchAllUsers > deve retornar mock data quando backend falha
Failed to fetch users from backend, using mock data

 [32mÃ”Â£Ã´[39m tests/api.test.ts [2m([22m[2m19 tests[22m[2m)[22m[90m 95[2mms[22m[39m
stderr | tests/api.test.ts > API Service > Error handling > deve usar fallback para mock data em caso de erro de rede
Failed to fetch users from backend, using mock data

stderr | tests/api.test.ts > API Service > Error Handling > deve retornar mock data quando API retorna 404
Failed to fetch users from backend, using mock data

stderr | tests/api.test.ts > API Service > Error Handling > deve lanâ”œÂºar erro em operaâ”œÂºâ”œÃes crâ”œÂ¡ticas sem fallback
Failed to create job: Error: Falha de rede. Verifique sua conexâ”œÃºo.
    at makeApiError (C:\Users\JE\servio.ai\services\api.ts:58:15)
    at apiCall (C:\Users\JE\servio.ai\services\api.ts:103:11)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.createJob (C:\Users\JE\servio.ai\services\api.ts:368:12) {
  code: 'E_NETWORK'
}

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Error handling > deve lidar com timeout de requisiâ”œÂºâ”œÃºo
Failed to fetch users from backend, using mock data

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Concorrâ”œÂ¬ncia > deve manter isolamento entre requisiâ”œÂºâ”œÃes paralelas que falham
Failed to fetch users from backend, using mock data

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Rate limiting e retry > deve lidar com resposta 429 (Too Many Requests)
Failed to fetch users from backend, using mock data

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Rate limiting e retry > deve lidar com mâ”œâ•‘ltiplas falhas consecutivas
Failed to fetch users from backend, using mock data
Failed to fetch users from backend, using mock data

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Headers e autenticaâ”œÂºâ”œÃºo > deve lidar com erro de autenticaâ”œÂºâ”œÃºo (401)
Failed to fetch users from backend, using mock data

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Headers e autenticaâ”œÂºâ”œÃºo > deve lidar com erro de permissâ”œÃºo (403)
Failed to fetch users from backend, using mock data

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Fallback para mock data > deve usar mock data quando backend estâ”œÃ­ indisponâ”œÂ¡vel
Failed to fetch users from backend, using mock data

stderr | tests/api.edgecases.test.ts > API Service - Edge Cases > Fallback para mock data > deve usar mock data quando resposta â”œÂ® invâ”œÃ­lida
Failed to fetch users from backend, using mock data

 [31mÃ”Ã˜Â»[39m tests/AIJobRequestWizard.test.tsx [2m([22m[2m0 test[22m[2m)[22m
 [32mÃ”Â£Ã´[39m tests/adminMetrics.test.ts [2m([22m[2m16 tests[22m[2m)[22m[90m 225[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/errorMessages.test.ts [2m([22m[2m22 tests[22m[2m)[22m[90m 39[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/api.edgecases.test.ts [2m([22m[2m17 tests[22m[2m)[22m[90m 185[2mms[22m[39m
stderr | tests/AdminDashboard.test.tsx > AdminDashboard > deve renderizar o dashboard do admin com loading inicial
Failed to load admin analytics data: Error: [vitest] No "fetchJobs" export is defined on the "../services/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at loadData (C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:20:15)
    at C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:36:5
    at commitHookEffectListMount (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:23189:26)
    at commitPassiveMountOnFiber (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24970:11)
    at commitPassiveMountEffects_complete (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24930:9)
    at commitPassiveMountEffects_begin (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24917:7)
    at commitPassiveMountEffects (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24905:3)
    at flushPassiveEffectsImpl (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:27078:3) {
  codeFrame: 'vi\x1B[33m.\x1B[39m\x1B[34mmock\x1B[39m(\x1B[35mimport\x1B[39m(\x1B[32m"../services/api"\x1B[39m)\x1B[33m,\x1B[39m \x1B[35masync\x1B[39m (importOriginal) \x1B[33m=>\x1B[39m {\n' +
    '  \x1B[35mconst\x1B[39m actual \x1B[33m=\x1B[39m \x1B[35mawait\x1B[39m \x1B[34mimportOriginal\x1B[39m()\n' +
    '  \x1B[35mreturn\x1B[39m {\n' +
    '    \x1B[33m...\x1B[39mactual\x1B[33m,\x1B[39m\n' +
    '    \x1B[90m// your mocked methods\x1B[39m\n' +
    '  }\n' +
    '})'
}
Ã”ÃœÃ¡Â´Â©Ã… React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
Ã”ÃœÃ¡Â´Â©Ã… React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

stderr | tests/AdminDashboard.test.tsx > AdminDashboard > deve exibir analytics apâ”œâ”‚s carregamento
Failed to load admin analytics data: Error: [vitest] No "fetchJobs" export is defined on the "../services/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at loadData (C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:20:15)
    at C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:36:5
    at commitHookEffectListMount (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:23189:26)
    at commitPassiveMountOnFiber (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24970:11)
    at commitPassiveMountEffects_complete (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24930:9)
    at commitPassiveMountEffects_begin (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24917:7)
    at commitPassiveMountEffects (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24905:3)
    at flushPassiveEffectsImpl (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:27078:3) {
  codeFrame: 'vi\x1B[33m.\x1B[39m\x1B[34mmock\x1B[39m(\x1B[35mimport\x1B[39m(\x1B[32m"../services/api"\x1B[39m)\x1B[33m,\x1B[39m \x1B[35masync\x1B[39m (importOriginal) \x1B[33m=>\x1B[39m {\n' +
    '  \x1B[35mconst\x1B[39m actual \x1B[33m=\x1B[39m \x1B[35mawait\x1B[39m \x1B[34mimportOriginal\x1B[39m()\n' +
    '  \x1B[35mreturn\x1B[39m {\n' +
    '    \x1B[33m...\x1B[39mactual\x1B[33m,\x1B[39m\n' +
    '    \x1B[90m// your mocked methods\x1B[39m\n' +
    '  }\n' +
    '})'
}

stderr | tests/AdminDashboard.test.tsx > AdminDashboard > deve filtrar jobs por status
Failed to load admin analytics data: Error: [vitest] No "fetchJobs" export is defined on the "../services/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at loadData (C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:20:15)
    at C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:36:5
    at commitHookEffectListMount (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:23189:26)
    at commitPassiveMountOnFiber (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24970:11)
    at commitPassiveMountEffects_complete (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24930:9)
    at commitPassiveMountEffects_begin (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24917:7)
    at commitPassiveMountEffects (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24905:3)
    at flushPassiveEffectsImpl (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:27078:3) {
  codeFrame: 'vi\x1B[33m.\x1B[39m\x1B[34mmock\x1B[39m(\x1B[35mimport\x1B[39m(\x1B[32m"../services/api"\x1B[39m)\x1B[33m,\x1B[39m \x1B[35masync\x1B[39m (importOriginal) \x1B[33m=>\x1B[39m {\n' +
    '  \x1B[35mconst\x1B[39m actual \x1B[33m=\x1B[39m \x1B[35mawait\x1B[39m \x1B[34mimportOriginal\x1B[39m()\n' +
    '  \x1B[35mreturn\x1B[39m {\n' +
    '    \x1B[33m...\x1B[39mactual\x1B[33m,\x1B[39m\n' +
    '    \x1B[90m// your mocked methods\x1B[39m\n' +
    '  }\n' +
    '})'
}

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m01 creates admin, client, provider users
[22m[39mÃ”Â£Ã´ Admin created: admin-test-1763221464392@servio.test

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m01 creates admin, client, provider users
[22m[39mÃ”Â£Ã´ Client created: client-analytics-1763221467787@servio.test

stderr | tests/AdminDashboard.test.tsx > AdminDashboard > deve permitir suspender um provedor
Failed to load admin analytics data: Error: [vitest] No "fetchJobs" export is defined on the "../services/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at loadData (C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:20:15)
    at C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:36:5
    at commitHookEffectListMount (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:23189:26)
    at commitPassiveMountOnFiber (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24970:11)
    at commitPassiveMountEffects_complete (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24930:9)
    at commitPassiveMountEffects_begin (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24917:7)
    at commitPassiveMountEffects (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24905:3)
    at flushPassiveEffectsImpl (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:27078:3) {
  codeFrame: 'vi\x1B[33m.\x1B[39m\x1B[34mmock\x1B[39m(\x1B[35mimport\x1B[39m(\x1B[32m"../services/api"\x1B[39m)\x1B[33m,\x1B[39m \x1B[35masync\x1B[39m (importOriginal) \x1B[33m=>\x1B[39m {\n' +
    '  \x1B[35mconst\x1B[39m actual \x1B[33m=\x1B[39m \x1B[35mawait\x1B[39m \x1B[34mimportOriginal\x1B[39m()\n' +
    '  \x1B[35mreturn\x1B[39m {\n' +
    '    \x1B[33m...\x1B[39mactual\x1B[33m,\x1B[39m\n' +
    '    \x1B[90m// your mocked methods\x1B[39m\n' +
    '  }\n' +
    '})'
}

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m01 creates admin, client, provider users
[22m[39mÃ”Â£Ã´ Provider created: provider-analytics-1763221468265@servio.test

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m02 lists users including test subset
[22m[39m
[TEST 2] Fetch all users for analytics...

stderr | tests/AuctionRoomModal.test.tsx > AuctionRoomModal > contador encerra apâ”œâ”‚s expirar (fake timers)
Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m02 lists users including test subset
[22m[39mÃ”Â£Ã´ Fetched 410 users (test subset: 401) successfully

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m03 creates and completes job with earnings
[22m[39m
[TEST 3] Create job for analytics data...

 [32mÃ”Â£Ã´[39m tests/PaymentModal.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 3883[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m PaymentModal[2m > [22mchama onClose quando clicar no botâ”œÃºo Cancelar [33m1122[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m PaymentModal[2m > [22mchama onClose quando clicar no botâ”œÃºo X [33m436[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m PaymentModal[2m > [22mchama onConfirmPayment e exibe loading ao clicar em Pagar [33m632[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m PaymentModal[2m > [22mexibe mensagem de erro quando onConfirmPayment falha [33m705[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m PaymentModal[2m > [22mdesabilita botâ”œÃes durante loading [33m752[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/AuctionRoomModal.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 3876[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m AuctionRoomModal[2m > [22mvalida e envia lance menor que o menor existente [33m3309[2mms[22m[39m
stderr | tests/AdminDashboard.test.tsx > AdminDashboard > deve chamar mediaâ”œÂºâ”œÃºo de disputa ao clicar em "Mediar"
Failed to load admin analytics data: Error: [vitest] No "fetchJobs" export is defined on the "../services/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at loadData (C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:20:15)
    at C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:36:5
    at commitHookEffectListMount (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:23189:26)
    at commitPassiveMountOnFiber (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24970:11)
    at commitPassiveMountEffects_complete (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24930:9)
    at commitPassiveMountEffects_begin (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24917:7)
    at commitPassiveMountEffects (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24905:3)
    at flushPassiveEffectsImpl (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:27078:3) {
  codeFrame: 'vi\x1B[33m.\x1B[39m\x1B[34mmock\x1B[39m(\x1B[35mimport\x1B[39m(\x1B[32m"../services/api"\x1B[39m)\x1B[33m,\x1B[39m \x1B[35masync\x1B[39m (importOriginal) \x1B[33m=>\x1B[39m {\n' +
    '  \x1B[35mconst\x1B[39m actual \x1B[33m=\x1B[39m \x1B[35mawait\x1B[39m \x1B[34mimportOriginal\x1B[39m()\n' +
    '  \x1B[35mreturn\x1B[39m {\n' +
    '    \x1B[33m...\x1B[39mactual\x1B[33m,\x1B[39m\n' +
    '    \x1B[90m// your mocked methods\x1B[39m\n' +
    '  }\n' +
    '})'
}

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m03 creates and completes job with earnings
[22m[39mÃ”Â£Ã´ Job created: uwaCherCgGSDa8IgUY4g

stderr | tests/AdminDashboard.test.tsx > AdminDashboard > deve tratar erro de API gracefully
Failed to load admin analytics data: Error: [vitest] No "fetchJobs" export is defined on the "../services/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at loadData (C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:20:15)
    at C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:36:5
    at commitHookEffectListMount (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:23189:26)
    at commitPassiveMountOnFiber (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24970:11)
    at commitPassiveMountEffects_complete (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24930:9)
    at commitPassiveMountEffects_begin (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24917:7)
    at commitPassiveMountEffects (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24905:3)
    at flushPassiveEffectsImpl (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:27078:3) {
  codeFrame: 'vi\x1B[33m.\x1B[39m\x1B[34mmock\x1B[39m(\x1B[35mimport\x1B[39m(\x1B[32m"../services/api"\x1B[39m)\x1B[33m,\x1B[39m \x1B[35masync\x1B[39m (importOriginal) \x1B[33m=>\x1B[39m {\n' +
    '  \x1B[35mconst\x1B[39m actual \x1B[33m=\x1B[39m \x1B[35mawait\x1B[39m \x1B[34mimportOriginal\x1B[39m()\n' +
    '  \x1B[35mreturn\x1B[39m {\n' +
    '    \x1B[33m...\x1B[39mactual\x1B[33m,\x1B[39m\n' +
    '    \x1B[90m// your mocked methods\x1B[39m\n' +
    '  }\n' +
    '})'
}

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m03 creates and completes job with earnings
[22m[39mÃ”Â£Ã´ Job completed with earnings

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m04 aggregates revenue metrics
[22m[39m
[TEST 4] Verify analytics includes revenue data...

stderr | tests/AdminDashboard.test.tsx > AdminDashboard > deve navegar entre abas do dashboard
Failed to load admin analytics data: Error: [vitest] No "fetchJobs" export is defined on the "../services/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at loadData (C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:20:15)
    at C:\Users\JE\servio.ai\components\useAdminAnalyticsData.ts:36:5
    at commitHookEffectListMount (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:23189:26)
    at commitPassiveMountOnFiber (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24970:11)
    at commitPassiveMountEffects_complete (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24930:9)
    at commitPassiveMountEffects_begin (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24917:7)
    at commitPassiveMountEffects (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24905:3)
    at flushPassiveEffectsImpl (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:27078:3) {
  codeFrame: 'vi\x1B[33m.\x1B[39m\x1B[34mmock\x1B[39m(\x1B[35mimport\x1B[39m(\x1B[32m"../services/api"\x1B[39m)\x1B[33m,\x1B[39m \x1B[35masync\x1B[39m (importOriginal) \x1B[33m=>\x1B[39m {\n' +
    '  \x1B[35mconst\x1B[39m actual \x1B[33m=\x1B[39m \x1B[35mawait\x1B[39m \x1B[34mimportOriginal\x1B[39m()\n' +
    '  \x1B[35mreturn\x1B[39m {\n' +
    '    \x1B[33m...\x1B[39mactual\x1B[33m,\x1B[39m\n' +
    '    \x1B[90m// your mocked methods\x1B[39m\n' +
    '  }\n' +
    '})'
}

 [32mÃ”Â£Ã´[39m tests/DisputeModal.unit.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[33m 5287[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m DisputeModal (unit)[2m > [22menvia mensagem ao submeter quando hâ”œÃ­ texto e outra parte [33m1824[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m DisputeModal (unit)[2m > [22mnâ”œÃºo envia quando mensagem vazia ou sâ”œâ”‚ espaâ”œÂºos [33m880[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m DisputeModal (unit)[2m > [22mnâ”œÃºo envia se otherParty estiver ausente [33m1143[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m DisputeModal (unit)[2m > [22mfecha ao clicar no botâ”œÃºo de fechar [33m352[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m DisputeModal (unit)[2m > [22menvia mensagem ao pressionar Enter [33m468[2mms[22m[39m
[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m04 aggregates revenue metrics
[22m[39mÃ”Â£Ã´ Total revenue: R$ 19950.00
Ã”Â£Ã´ Platform revenue: R$ 3967.50

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39m
[TEST 5] Create dispute for resolution testing...

stderr | tests/AdminDashboard.test.tsx > AdminDashboard > deve navegar entre abas do dashboard
Failed to load job management data: Error: [vitest] No "fetchJobs" export is defined on the "../services/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at loadData (C:\Users\JE\servio.ai\components\AdminJobManagement.tsx:33:21)
    at C:\Users\JE\servio.ai\components\AdminJobManagement.tsx:44:5
    at commitHookEffectListMount (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:23189:26)
    at commitPassiveMountOnFiber (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24970:11)
    at commitPassiveMountEffects_complete (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24930:9)
    at commitPassiveMountEffects_begin (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24917:7)
    at commitPassiveMountEffects (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:24905:3)
    at flushPassiveEffectsImpl (C:\Users\JE\servio.ai\node_modules\react-dom\cjs\react-dom.development.js:27078:3) {
  codeFrame: 'vi\x1B[33m.\x1B[39m\x1B[34mmock\x1B[39m(\x1B[35mimport\x1B[39m(\x1B[32m"../services/api"\x1B[39m)\x1B[33m,\x1B[39m \x1B[35masync\x1B[39m (importOriginal) \x1B[33m=>\x1B[39m {\n' +
    '  \x1B[35mconst\x1B[39m actual \x1B[33m=\x1B[39m \x1B[35mawait\x1B[39m \x1B[34mimportOriginal\x1B[39m()\n' +
    '  \x1B[35mreturn\x1B[39m {\n' +
    '    \x1B[33m...\x1B[39mactual\x1B[33m,\x1B[39m\n' +
    '    \x1B[90m// your mocked methods\x1B[39m\n' +
    '  }\n' +
    '})'
}

 [32mÃ”Â£Ã´[39m tests/AdminDashboard.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 5190[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m AdminDashboard[2m > [22mdeve filtrar jobs por status [33m2073[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m AdminDashboard[2m > [22mdeve permitir suspender um provedor [33m1121[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m AdminDashboard[2m > [22mdeve chamar mediaâ”œÂºâ”œÃºo de disputa ao clicar em "Mediar" [33m679[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m AdminDashboard[2m > [22mdeve navegar entre abas do dashboard [33m720[2mms[22m[39m
[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39mÃ”Â£Ã´ Dispute created: oJmA9albKnnvbr3yoCjD

[TEST 6] Fetch disputes for analytics...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39mÃ”Â£Ã´ Total disputes: 123
Ã”Â£Ã´ Open disputes: 123
Ã”Â£Ã´ Resolved disputes: 0

[TEST 6b] Seed escrow for job (optional)...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39mÃ”Ã¥Ã€ Skipped: test-utils escrow seeding not available

[TEST 7] Resolve dispute as admin...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39mÃ”Ã¥Ã€ Resolution skipped: 404 - {"error":"Escrow record not found for this job."}
  (Endpoint requer escrow configurado - teste manual necessâ”œÃ­rio)

[TEST 8] Verify dispute resolution in analytics...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m05-08 dispute flow (skipped if endpoint missing)
[22m[39mÃ”Ã¥Ã€ Skipped: dispute resolution was not completed (requires escrow setup)

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m09 creates sentiment alert
[22m[39m
[TEST 9] Create fraud alert for analytics...

 [32mÃ”Â£Ã´[39m tests/ProposalModal.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 7132[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProposalModal[2m > [22mfecha modal ao clicar no X [33m1344[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProposalModal[2m > [22mpermite enviar proposta com preâ”œÂºo e mensagem [33m2438[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProposalModal[2m > [22mexibe erro quando preâ”œÂºo â”œÂ® invâ”œÃ­lido [33m923[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProposalModal[2m > [22mgera mensagem com IA quando botâ”œÃºo â”œÂ® clicado [33m651[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProposalModal[2m > [22mexibe erro quando IA falha ao gerar mensagem [33m573[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProposalModal[2m > [22mpermite submeter proposta sem mensagem [33m807[2mms[22m[39m
[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m09 creates sentiment alert
[22m[39mÃ”Â£Ã´ Fraud alert created with risk score: 8

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m10 lists sentiment alerts
[22m[39m
[TEST 10] Fetch fraud alerts for analytics...

[90mstdout[2m | tests/e2e_admin_dashboard.test.mjs[2m > [22m[2mAdmin Dashboard E2E (API integration)[2m > [22m[2m10 lists sentiment alerts
[22m[39mÃ”Â£Ã´ Total fraud alerts: 129
Ã”Â£Ã´ New alerts: 129
Ã”Â£Ã´ High risk alerts: 129

stderr | tests/api.more.test.ts > API Service Ã”Ã‡Ã´ additional coverage > fetchOpenJobs > faz fallback para MOCK_JOBS quando o backend falha
Failed to fetch open jobs from backend, using mock data

stderr | tests/api.more.test.ts > API Service Ã”Ã‡Ã´ additional coverage > Maintained Items > faz fallback para itens do mock quando o backend falha
Failed to fetch maintained items, using mock data

stderr | tests/api.more.test.ts > API Service Ã”Ã‡Ã´ additional coverage > Bids > faz fallback para MOCK_BIDS quando falha
Failed to fetch bids, using mock data

stderr | tests/api.more.test.ts > API Service Ã”Ã‡Ã´ additional coverage > Bids > filtra bids por provider no fallback
Failed to fetch bids for provider fernanda.design@email.com from backend, using mock data

 [32mÃ”Â£Ã´[39m tests/e2e_admin_dashboard.test.mjs [2m([22m[2m7 tests[22m[2m)[22m[33m 8869[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m01 creates admin, client, provider users [33m4192[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m02 lists users including test subset [33m824[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m03 creates and completes job with earnings [33m833[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m04 aggregates revenue metrics [33m605[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m05-08 dispute flow (skipped if endpoint missing) [33m1747[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Admin Dashboard E2E (API integration)[2m > [22m10 lists sentiment alerts [33m404[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/api.more.test.ts [2m([22m[2m9 tests[22m[2m)[22m[90m 75[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/AuthModal.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 978[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m AuthModal[2m > [22mrenderiza tâ”œÂ¡tulo de login e envia credenciais [33m439[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/ChatModal.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 7677[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ChatModal[2m > [22mbloqueia envio quando outra parte nâ”œÃºo existe [33m2437[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ChatModal[2m > [22menvia mensagem de texto e limpa input [33m1249[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ChatModal[2m > [22mmostra sugestâ”œÃºo da IA e envia resumo como notificaâ”œÂºâ”œÃºo de sistema [33m1076[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ChatModal[2m > [22mexibe sugestâ”œÃºo de agendamento via IA (proposeScheduleFromChat) e confirma [33m645[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ChatModal[2m > [22mpermite sugerir agendamento manual e envia schedule_proposal [33m1630[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ChatModal[2m > [22mmostra proposta de agendamento recebida e permite confirmar [33m379[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/ReviewModal.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[33m 9059[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ReviewModal[2m > [22mrenderiza modal com tâ”œÂ¡tulo e campos [33m1479[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ReviewModal[2m > [22mfecha modal ao clicar no botâ”œÃºo X [33m991[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ReviewModal[2m > [22mnâ”œÃºo permite submeter quando rating â”œÂ® 0 (botâ”œÃºo desabilitado) [33m972[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ReviewModal[2m > [22mpermite selecionar rating e submeter review [33m1289[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ReviewModal[2m > [22mpermite submeter review sem comentâ”œÃ­rio [33m688[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ReviewModal[2m > [22mgera comentâ”œÃ­rio com IA quando botâ”œÃºo â”œÂ® clicado [33m803[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ReviewModal[2m > [22mexibe erro quando IA falha ao gerar comentâ”œÃ­rio [33m1018[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ReviewModal[2m > [22mdesabilita botâ”œÃºo de gerar IA quando rating nâ”œÃºo foi selecionado [33m699[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ReviewModal[2m > [22mexibe mensagem de erro ao tentar gerar IA sem rating [33m622[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ReviewModal[2m > [22mdesabilita botâ”œÃºo submit quando rating â”œÂ® 0 [33m491[2mms[22m[39m
stderr | tests/ProviderOnboarding.test.tsx > ProviderOnboarding > deve renderizar a primeira etapa (Welcome) e a barra de progresso por padrâ”œÃºo
Ã”ÃœÃ¡Â´Â©Ã… React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
Ã”ÃœÃ¡Â´Â©Ã… React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

 [32mÃ”Â£Ã´[39m tests/modals.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 3049[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Modals Suite[2m > [22mDisputeModal[2m > [22mrenderiza mensagens existentes e envia nova mensagem [33m326[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Modals Suite[2m > [22mDisputeModal[2m > [22mnâ”œÃºo envia mensagem vazia [33m837[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Modals Suite[2m > [22mReviewModal[2m > [22menvia avaliaâ”œÂºâ”œÃºo com rating e comentâ”œÃ­rio [33m748[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Modals Suite[2m > [22mServiceCatalogModal[2m > [22madiciona e remove serviâ”œÂºo do catâ”œÃ­logo [33m924[2mms[22m[39m
stderr | tests/api.proposals.test.ts > Proposal Management > createProposal > valida preâ”œÂºo mâ”œÂ¡nimo na proposta
Failed to create proposal: Error: Erro interno do servidor. Tente mais tarde.
    at makeApiError (C:\Users\JE\servio.ai\services\api.ts:58:15)
    at apiCall (C:\Users\JE\servio.ai\services\api.ts:90:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.createProposal (C:\Users\JE\servio.ai\services\api.ts:440:12)
    at C:\Users\JE\servio.ai\tests\api.proposals.test.ts:50:7
    at file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1205:15) {
  code: 'E_SERVER',
  details: { error: 'Preâ”œÂºo mâ”œÂ¡nimo â”œÂ® R$ 50' }
}

stderr | tests/api.proposals.test.ts > Proposal Management > createProposal > valida descriâ”œÂºâ”œÃºo obrigatâ”œâ”‚ria
Failed to create proposal: Error: Falha de rede. Verifique sua conexâ”œÃºo.
    at makeApiError (C:\Users\JE\servio.ai\services\api.ts:58:15)
    at apiCall (C:\Users\JE\servio.ai\services\api.ts:103:11)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.createProposal (C:\Users\JE\servio.ai\services\api.ts:440:12) {
  code: 'E_NETWORK'
}

stderr | tests/api.proposals.test.ts > Proposal Management > createProposal > previne duplicata de proposta do mesmo provider
Failed to create proposal: Error: Erro interno do servidor. Tente mais tarde.
    at makeApiError (C:\Users\JE\servio.ai\services\api.ts:58:15)
    at apiCall (C:\Users\JE\servio.ai\services\api.ts:90:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.createProposal (C:\Users\JE\servio.ai\services\api.ts:440:12)
    at C:\Users\JE\servio.ai\tests\api.proposals.test.ts:71:7
    at file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1205:15) {
  code: 'E_SERVER',
  details: { error: 'Proposta jâ”œÃ­ existe para este job' }
}

 [32mÃ”Â£Ã´[39m tests/api.proposals.test.ts [2m([22m[2m7 tests[22m[2m)[22m[90m 83[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/JobCard.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 2774[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m JobCard[2m > [22mrenderiza informaâ”œÂºâ”œÃes bâ”œÃ­sicas e preâ”œÂºo fixo quando tabelado [33m1218[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m JobCard[2m > [22mmostra botâ”œÃºo de FAQ e abre modal com FAQ gerada [33m628[2mms[22m[39m
stderr | tests/App.createJobFlow.test.tsx > App - Fluxo Criar Job (integraâ”œÂºâ”œÃºo leve) > feliz: cria job, faz matching e notifica prestadores
[FCM] Messaging not supported in this browser.

stderr | tests/App.createJobFlow.test.tsx > App - Fluxo Criar Job (integraâ”œÂºâ”œÃºo leve) > feliz: cria job, faz matching e notifica prestadores
Warning: An update to App inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at App (C:\Users\JE\servio.ai\App.tsx:34:63)

 [32mÃ”Â£Ã´[39m tests/api.payments.test.ts [2m([22m[2m9 tests[22m[2m)[22m[90m 49[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/ProviderOnboarding.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 4961[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProviderOnboarding[2m > [22mdeve exibir um erro de validaâ”œÂºâ”œÃºo e nâ”œÃºo avanâ”œÂºar se a biografia for muito curta [33m1754[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProviderOnboarding[2m > [22mdeve avanâ”œÂºar para a prâ”œâ”‚xima etapa e chamar a API de atualizaâ”œÂºâ”œÃºo ao preencher os dados corretamente [33m1538[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProviderOnboarding[2m > [22mdeve chamar as APIs do Stripe e redirecionar na etapa de pagamento [33m1425[2mms[22m[39m
stderr | tests/App.createJobFlow.test.tsx > App - Fluxo Criar Job (integraâ”œÂºâ”œÃºo leve) > erro: alerta falha ao criar serviâ”œÂºo e fecha wizard
[FCM] Messaging not supported in this browser.

stderr | tests/App.createJobFlow.test.tsx > App - Fluxo Criar Job (integraâ”œÂºâ”œÃºo leve) > erro: alerta falha ao criar serviâ”œÂºo e fecha wizard
Warning: An update to App inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at App (C:\Users\JE\servio.ai\App.tsx:34:63)

stderr | tests/api.matchProviders.test.ts > matchProvidersForJob > faz fallback para matching bâ”œÃ­sico quando backend falha
AI matching failed, using basic local matching
Failed to fetch providers from backend, using mock data

 [32mÃ”Â£Ã´[39m tests/api.matchProviders.test.ts [2m([22m[2m6 tests[22m[2m)[22m[90m 60[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/App.createJobFlow.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 5672[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m App - Fluxo Criar Job (integraâ”œÂºâ”œÃºo leve)[2m > [22mfeliz: cria job, faz matching e notifica prestadores [33m4136[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m App - Fluxo Criar Job (integraâ”œÂºâ”œÃºo leve)[2m > [22merro: alerta falha ao criar serviâ”œÂºo e fecha wizard [33m1530[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/Header.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[33m 2121[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m Header[2m > [22mchama onLoginClick ao clicar em "Entrar" [33m967[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/analytics.test.ts [2m([22m[2m3 tests[22m[2m)[22m[90m 17[2mms[22m[39m
 [31mÃ”Ã˜Â»[39m tests/ProviderDashboard.test.tsx [2m([22m[2m0 test[22m[2m)[22m
 [32mÃ”Â£Ã´[39m tests/geminiService.resolveEndpoint.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 31[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/ClientDashboard.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 19273[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ClientDashboard[2m > [22mrenderiza tabs e saudaâ”œÂºâ”œÃºo apâ”œâ”‚s o loading [33m5146[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ClientDashboard[2m > [22malternâ”œÃ³ncia de tabs e estados vazios (serviâ”œÂºos/itens/ajuda) [33m3300[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ClientDashboard[2m > [22maâ”œÂºâ”œÃºo râ”œÃ­pida "Solicitar Serviâ”œÂºo" dispara callback [33m1630[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ClientDashboard[2m > [22mbotâ”œÃºo "+ Novo Serviâ”œÂºo" em "Meus Serviâ”œÂºos" dispara callback [33m2111[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ClientDashboard[2m > [22mFluxo de Pagamento[2m > [22mdeve abrir o modal de pagamento ao aceitar uma proposta [33m1239[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ClientDashboard[2m > [22mFluxo de Pagamento[2m > [22mdeve chamar a API de checkout e redirecionar ao confirmar o pagamento [33m2531[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ClientDashboard[2m > [22mFluxo de Pagamento[2m > [22mdeve fechar o modal de pagamento ao clicar em cancelar [33m3299[2mms[22m[39m
stderr | tests/AdminDashboard.navigation.test.tsx > AdminDashboard Tab Navigation > deve renderizar a aba "Analytics" como padrâ”œÃºo e exibir seu conteâ”œâ•‘do
Ã”ÃœÃ¡Â´Â©Ã… React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
Ã”ÃœÃ¡Â´Â©Ã… React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

 [32mÃ”Â£Ã´[39m tests/ProviderJobCard.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 2724[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProviderJobCard[2m > [22mchama onUpdateStatus para a_caminho quando status agendado [33m1392[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProviderJobCard[2m > [22mchama onUpdateStatus para em_progresso quando status a_caminho [33m410[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProviderJobCard[2m > [22mmostra botâ”œÃºo para abrir chat com cliente e chama onChat [33m420[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/AdminDashboard.navigation.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 2154[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m AdminDashboard Tab Navigation[2m > [22mdeve navegar para a aba "Jobs" e exibir seu conteâ”œâ•‘do ao ser clicada [33m1239[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m AdminDashboard Tab Navigation[2m > [22mdeve navegar entre mâ”œâ•‘ltiplas abas corretamente [33m762[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/a11yHelpers.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 28[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/ErrorBoundary.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 1250[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ErrorBoundary[2m > [22mexibe botâ”œÃºo "Tentar novamente" quando hâ”œÃ­ erro [33m967[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/NotificationsBell.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 3145[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m NotificationsBell[2m > [22mexibe badge com contador de nâ”œÃºo lidas e abre o popover ao clicar [33m1822[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m NotificationsBell[2m > [22mmarca todas como lidas e fecha o popover [33m892[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m NotificationsBell[2m > [22mfecha o popover ao clicar fora [33m421[2mms[22m[39m
stderr | tests/ProfileTips.test.tsx > ProfileTips > mostra mensagem padrâ”œÃºo em caso de erro
Failed to fetch profile tip: Error: network
    at C:\Users\JE\servio.ai\tests\ProfileTips.test.tsx:39:58
    at file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1271:3)
    at file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11

 [32mÃ”Â£Ã´[39m tests/ProfileTips.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 1452[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProfileTips[2m > [22mexibe loading e depois a dica gerada pela IA [33m366[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProfileTips[2m > [22mdispara onEditProfile ao clicar em Editar Perfil [33m1002[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/NotificationsPopover.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 1975[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m NotificationsPopover[2m > [22mrenderiza lista e botâ”œÃºo de marcar todas quando hâ”œÃ­ nâ”œÃºo lidas [33m1575[2mms[22m[39m
stderr | tests/geminiService.test.ts > geminiService > enhanceJobRequest falls back to heuristic on backend failure
[enhanceJobRequest] Fallback heuristic used due to AI backend error: TypeError: Cannot read properties of undefined (reading 'catch')
    at fetchFromBackend (C:\Users\JE\servio.ai\services\geminiService.ts:118:10)
    at Module.enhanceJobRequest (C:\Users\JE\servio.ai\services\geminiService.ts:134:16)
    at C:\Users\JE\servio.ai\tests\geminiService.test.ts:40:20
    at file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///C:/Users/JE/servio.ai/node_modules/@vitest/runner/dist/index.js:1271:3)
    at file:///C:/Users/JE/servio.ai/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11

 [32mÃ”Â£Ã´[39m tests/geminiService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 353[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m geminiService[2m > [22menhanceJobRequest falls back to heuristic on backend failure [33m339[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/OnboardingStepProfile.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 5155[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m OnboardingStepProfile[2m > [22mdeve renderizar o tâ”œÂ¡tulo e o campo de input corretamente [33m1215[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m OnboardingStepProfile[2m > [22mdeve permitir ao usuâ”œÃ­rio adicionar uma nova especialidade [33m1164[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m OnboardingStepProfile[2m > [22mdeve limpar o input apâ”œâ”‚s adicionar uma especialidade [33m1495[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m OnboardingStepProfile[2m > [22mdeve permitir remover uma especialidade existente [33m365[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m OnboardingStepProfile[2m > [22mnâ”œÃºo deve adicionar uma especialidade duplicada ou vazia [33m907[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/ItemCard.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 1769[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ItemCard[2m > [22mrenderiza com imagem quando imageUrl estâ”œÃ­ presente [33m1001[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ItemCard[2m > [22maciona onClick ao clicar [33m723[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/api.admin.test.ts [2m([22m[2m3 tests[22m[2m)[22m[90m 25[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/LocationMap.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[90m 157[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/firebaseConfig.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 11[2mms[22m[39m
 [32mÃ”Â£Ã´[39m tests/ProfileStrength.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 1046[2mms[22m[39m
   [33m[2mÃ”Â£Ã´[22m[39m ProfileStrength[2m > [22mmostra botâ”œÃºo para completar perfil quando incompleto [33m766[2mms[22m[39m
 [31mÃ”Ã˜Â»[39m tests/ProfileModal.save.test.tsx [2m([22m[2m0 test[22m[2m)[22m
 [32mÃ”Â£Ã´[39m tests/smoke.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 3[2mms[22m[39m

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â» Failed Suites 3 Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»

 FAIL  tests/AIJobRequestWizard.test.tsx [ tests/AIJobRequestWizard.test.tsx ]
Error: Transform failed with 1 error:
C:/Users/JE/servio.ai/components/AIJobRequestWizard.tsx:75:2: ERROR: Unexpected "}"
  Plugin: vite:esbuild
  File: C:/Users/JE/servio.ai/components/AIJobRequestWizard.tsx:75:2
  
  Unexpected "}"
  73 |      }
  74 |    };}
  75 |    };
     |    ^
  76 |  
  77 |  
  
 Ã”Ã˜Â» failureErrorWithLog node_modules/esbuild/lib/main.js:1472:15
 Ã”Ã˜Â» node_modules/esbuild/lib/main.js:755:50
 Ã”Ã˜Â» responseCallbacks.<computed> node_modules/esbuild/lib/main.js:622:9
 Ã”Ã˜Â» handleIncomingPacket node_modules/esbuild/lib/main.js:677:12
 Ã”Ã˜Â» Socket.readFromStdout node_modules/esbuild/lib/main.js:600:7

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[1/3]Ã”Ã„Â»

 FAIL  tests/ProfileModal.save.test.tsx [ tests/ProfileModal.save.test.tsx ]
 FAIL  tests/ProviderDashboard.test.tsx [ tests/ProviderDashboard.test.tsx ]
Error: Transform failed with 1 error:
C:/Users/JE/servio.ai/components/ProfileModal.tsx:74:2: ERROR: Unexpected "}"
  Plugin: vite:esbuild
  File: C:/Users/JE/servio.ai/components/ProfileModal.tsx:74:2
  
  Unexpected "}"
  72 |      }
  73 |    };}
  74 |    };
     |    ^
  75 |  
  76 |    const handleAddPortfolioItem = async () => {
  
 Ã”Ã˜Â» failureErrorWithLog node_modules/esbuild/lib/main.js:1472:15
 Ã”Ã˜Â» node_modules/esbuild/lib/main.js:755:50
 Ã”Ã˜Â» responseCallbacks.<computed> node_modules/esbuild/lib/main.js:622:9
 Ã”Ã˜Â» handleIncomingPacket node_modules/esbuild/lib/main.js:677:12
 Ã”Ã˜Â» Socket.readFromStdout node_modules/esbuild/lib/main.js:600:7

Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»Ã”Ã„Â»[2/3]Ã”Ã„Â»

[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m41 passed[39m[22m[90m (44)[39m
[2m      Tests [22m [1m[32m283 passed[39m[22m[90m (283)[39m
[2m   Start at [22m 12:44:15
[2m   Duration [22m 41.78s[2m (transform 12.86s, setup 83.08s, collect 29.34s, tests 111.97s, environment 224.92s, prepare 41.46s)[22m

